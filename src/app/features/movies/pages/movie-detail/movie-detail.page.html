<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button [defaultHref]="backRoute"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ movie?.title }}</ion-title>
    <ion-buttons slot="end">
      @if (movie) {
      <ion-button (click)="toggleFavorite()">
        <ion-icon [name]="favoritesService.isFavorite(movie.id) ? 'heart' : 'heart-outline'" color="danger"
          slot="icon-only">
        </ion-icon>
      </ion-button>
      }
    </ion-buttons>


  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  @if (!movie) {
  <div class="ion-padding ion-text-center">
    <ion-spinner></ion-spinner>
  </div>
  }

  @if (movie) {
  <img [src]="movie.image" [alt]="movie.title" />
  <ion-card>

    <ion-card-content>
      <ion-list lines="none">
        <ion-item>
          <ion-icon name="film-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Original Title</h3>
            <p>{{ movie.original_title }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="calendar-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Release Year</h3>
            <p>{{ movie.release_date }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Director</h3>
            <p>{{ movie.director }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="create-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Producer</h3>
            <p>{{ movie.producer }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="time-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Running Time</h3>
            <p>{{ movie.running_time }} minutes</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="star-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Rotten Tomatoes Score</h3>
            <p>{{ movie.rt_score }}%</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!----------DESCRIPTION------------>
  <ion-card>
    <ion-card-header>
      <ion-card-title>Description</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      {{ movie.description }}
    </ion-card-content>
  </ion-card>

  <!-----------PEOPLE----------->
  @if (people && people.length > 0) {
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="people-outline"></ion-icon>
        Characters
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        @for (person of people; track person?.id) {
        @if (person) {
        <ion-item>
          <ion-label>
            <h2>{{ person.name }}</h2>
            <p>{{ person.gender }} • Age: {{ person.age }}</p>
            <p>{{ person.eye_color }} eyes • {{ person.hair_color }} hair</p>
          </ion-label>
        </ion-item>
        }
        }
      </ion-list>
    </ion-card-content>
  </ion-card>
  }

  @if (!people) {
  <ion-card>
    <ion-card-content class="ion-text-center">
      <ion-spinner></ion-spinner>
      <p>Loading people...</p>
    </ion-card-content>
  </ion-card>
  }




  }

</ion-content><ion-toast [isOpen]="isToastOpen" [message]="toastMessage" positionAnchor="tab-bar" [duration]="2000"
  position="bottom" (didDismiss)="isToastOpen = false">
</ion-toast>