<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/movies"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ movieResource.value()?.title }}</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  @if (movieResource.isLoading()) {
  <div class="ion-padding ion-text-center">
    <ion-spinner></ion-spinner>
  </div>
  }

  @if (movieResource.hasValue()) {
  <!-- Movie Banner -->
  <img [src]="movieResource.value().image" [alt]="movieResource.value().title" />

  <!-- Main Info Card -->
  <ion-card>

    <ion-card-content>
      <ion-list lines="none">
        <ion-item>
          <ion-icon name="film-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Original Title</h3>
            <p>{{ movieResource.value().original_title }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="calendar-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Release Year</h3>
            <p>{{ movieResource.value().release_date }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="person-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Director</h3>
            <p>{{ movieResource.value().director }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="create-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Producer</h3>
            <p>{{ movieResource.value().producer }}</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="time-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Running Time</h3>
            <p>{{ movieResource.value().running_time }} minutes</p>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-icon name="star-outline" slot="start"></ion-icon>
          <ion-label>
            <h3>Rotten Tomatoes Score</h3>
            <p>{{ movieResource.value().rt_score }}%</p>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Description -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Description</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      {{ movieResource.value().description }}
    </ion-card-content>
  </ion-card>

  <!-- People -->
  @if (peopleResource.hasValue() && peopleResource.value().length > 0) {
  <ion-card>
    <ion-card-header>
      <ion-card-title>
        <ion-icon name="people-outline"></ion-icon>
        Characters
      </ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        @for (person of peopleResource.value(); track person?.id) {
        @if (person) {
        <ion-item>
          <ion-label>
            <h2>{{ person.name }}</h2>
            <p>{{ person.gender }} • Age: {{ person.age }}</p>
            <p>{{ person.eye_color }} eyes • {{ person.hair_color }} hair</p>
          </ion-label>
        </ion-item>
        }
        }
      </ion-list>
    </ion-card-content>
  </ion-card>
  }

  @if (peopleResource.isLoading()) {
  <ion-card>
    <ion-card-content class="ion-text-center">
      <ion-spinner></ion-spinner>
      <p>Loading people...</p>
    </ion-card-content>
  </ion-card>
  }




  }

  @if (movieResource.error()) {
  <ion-card color="danger">
    <ion-card-content>
      <p>Error loading movie details</p>
    </ion-card-content>
  </ion-card>
  }
</ion-content>